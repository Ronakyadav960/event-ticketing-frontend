<div class="dashboard-header mb-4 d-flex justify-content-between align-items-center">
  <h3>Organizer Dashboard</h3>
  <button class="logout-btn btn btn-danger" (click)="logout()">Logout</button>
</div>

<!-- ✅ TOP STATS -->
<div class="row mb-3" *ngIf="events.length > 0">
  <div class="col-md-4 mb-2">
    <div class="card p-3 text-center">
      <h5 class="mb-1">Total Seats</h5>
      <h3 class="mb-0">{{ totalSeats }}</h3>
    </div>
  </div>

  <div class="col-md-4 mb-2">
    <div class="card p-3 text-center">
      <h5 class="mb-1">Booked Seats</h5>
      <h3 class="mb-0">{{ bookedSeats }}</h3>
    </div>
  </div>

  <div class="col-md-4 mb-2">
    <div class="card p-3 text-center">
      <h5 class="mb-1">Available Seats</h5>
      <h3 class="mb-0">{{ availableSeats }}</h3>
    </div>
  </div>
</div>

<!-- ✅ empty state -->
<div *ngIf="events.length === 0" class="alert alert-info">
  No events found. Create a new event to see it here.
</div>

<div class="row">
  <div class="col-md-4 mb-3" *ngFor="let e of events">
    <div class="card dashboard-card h-100 text-center p-3">
      <div class="card-body">
        <h5 class="mb-2">{{ e.title }}</h5>

        <p>Total Seats: <b>{{ e.totalSeats }}</b></p>
        <p>Booked: <b>{{ e.bookedSeats ?? 0 }}</b></p>

        <p
          class="fw-bold"
          [class.text-danger]="remainingSeats(e) === 0"
          [class.text-success]="remainingSeats(e) > 0"
        >
          Remaining: {{ remainingSeats(e) }}
        </p>

        <span
          class="badge"
          [ngClass]="{
            'bg-danger': remainingSeats(e) === 0,
            'bg-success': remainingSeats(e) > 0
          }"
        >
          {{ remainingSeats(e) === 0 ? 'Sold Out' : 'Open' }}
        </span>

        <!-- ADMIN BUTTONS -->
        <div *ngIf="isAdmin()" class="mt-3 d-flex justify-content-around">
          <button class="btn btn-sm btn-warning" (click)="editEvent(e.id)" [disabled]="!e.id">
            Edit
          </button>

          <button class="btn btn-sm btn-danger" (click)="deleteEvent(e.id)" [disabled]="!e.id">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
